{"version":3,"sources":["components/Persona/Persona.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;IAwBA,IAAM,MAAM,GAAQ,YAAY,CAAC;IAEjC,yBAAyB;IACzB,IAAM,qBAAqB,GAA2B;QACpD,oCAAoB,CAAC,UAAU;QAC/B,oCAAoB,CAAC,SAAS;QAC9B,oCAAoB,CAAC,SAAS;QAC9B,oCAAoB,CAAC,KAAK;QAC1B,oCAAoB,CAAC,SAAS;QAC9B,oCAAoB,CAAC,IAAI;QACzB,oCAAoB,CAAC,OAAO;QAC5B,oCAAoB,CAAC,MAAM;QAC3B,oCAAoB,CAAC,KAAK;QAC1B,oCAAoB,CAAC,IAAI;QACzB,oCAAoB,CAAC,IAAI;QACzB,oCAAoB,CAAC,QAAQ;QAC7B,oCAAoB,CAAC,MAAM;QAC3B,oCAAoB,CAAC,OAAO;QAC5B,oCAAoB,CAAC,GAAG;KACzB,CAAC;IAEF,IAAM,0BAA0B,GAAG,qBAAqB,CAAC,MAAM,CAAC;IAMhE;QAA6B,2BAA2C;QAOtE,iBAAY,KAAoB;YAAhC,YACE,kBAAM,KAAK,CAAC,SAKb;YAHC,KAAI,CAAC,KAAK,GAAG;gBACX,aAAa,EAAE,KAAK;aACrB,CAAC;;QACJ,CAAC;QAEM,wBAAM,GAAb;YACM,IAAA,eAkBU,EAjBZ,wBAAS,EACT,cAAI,EACJ,sBAAQ,EACR,gCAAa,EACb,sBAAQ,EACR,4BAAW,EACX,gCAAa,EACb,8BAAY,EACZ,8BAAY,EACZ,0CAAkB,EAClB,wCAAiB,EACjB,wBAAyC,EAAzC,8DAAyC,EACzC,4CAAmB,EACnB,gDAAqB,EACrB,8CAAoB,EACpB,8CAAoB,EACpB,oDAAuB,CACV;YAEf,aAAa,GAAG,aAAa,KAAK,SAAS,IAAI,aAAa,KAAK,IAAI,GAAG,aAAa,GAAG,IAAI,CAAC,iBAAiB,CAAC,WAAW,CAAC,CAAC;YAE5H,IAAI,eAAe,GAAG,IAAI,CAAC;YAC3B,EAAE,CAAC,CAAC,QAAQ,KAAK,+BAAe,CAAC,IAAI,CAAC,CAAC,CAAC;gBACtC,IAAI,YAAY,GAAG,+BAAe,CAAC,QAAQ,CAAC,EAC1C,UAAU,GAAG,IAAI,CAAC;gBACpB,MAAM,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;oBACrB,KAAK,QAAQ;wBACX,YAAY,GAAG,YAAY,CAAC;wBAC5B,KAAK,CAAC;oBACR,KAAK,MAAM;wBACT,YAAY,GAAG,YAAY,CAAC;wBAC5B,KAAK,CAAC;oBACR,KAAK,KAAK;wBACR,YAAY,GAAG,YAAY,CAAC;wBAC5B,KAAK,CAAC;oBACR;wBACE,YAAY,GAAG,EAAE,CAAC;gBACtB,CAAC;gBACD,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;oBACjB,IAAI,SAAS,GAAG,eAAG,CAAC,8CAA4C,YAAc,EAAE,MAAM,CAAC,YAAY,CAAC,CAAC;oBACrG,UAAU,GAAG,2BAAG,SAAS,EAAG,SAAS,GAAO,CAAC;gBAC/C,CAAC;gBACD,eAAe,GAAG,6BAAK,SAAS,EAAG,eAAG,CAAC,qBAAqB,EAAE,MAAM,CAAC,QAAQ,CAAC,IAAK,UAAU,CAAQ,CAAC;YACxG,CAAC;YAED,IAAI,QAAQ,GAAG,0BAAc,CAAC,IAAI,CAAC,KAAK,EAAE,yBAAa,CAAC,CAAC;YACzD,IAAI,cAAc,GAAG,6BAAK,SAAS,EAAG,eAAG,CAAC,oBAAoB,EAAE,MAAM,CAAC,OAAO,CAAC;gBAC3E,IAAI,CAAC,cAAc,CACnB,IAAI,CAAC,KAAK,CAAC,WAAW,EACtB,eAAG,CAAC,wBAAwB,EAAE,MAAM,CAAC,WAAW,CAAC,EACjD,mBAAmB,CAAC;gBACpB,IAAI,CAAC,cAAc,CACnB,IAAI,CAAC,KAAK,CAAC,aAAa,EACxB,eAAG,CAAC,0BAA0B,EAAE,MAAM,CAAC,aAAa,CAAC,EACrD,qBAAqB,CAAC;gBACtB,IAAI,CAAC,cAAc,CACnB,IAAI,CAAC,KAAK,CAAC,YAAY,EACvB,eAAG,CAAC,yBAAyB,EAAE,MAAM,CAAC,YAAY,CAAC,EACnD,oBAAoB,CAAC;gBACrB,IAAI,CAAC,cAAc,CACnB,IAAI,CAAC,KAAK,CAAC,YAAY,EACvB,eAAG,CAAC,yBAAyB,EAAE,MAAM,CAAC,YAAY,CAAC,EACnD,oBAAoB,CAAC;gBACrB,IAAI,CAAC,KAAK,CAAC,QAAQ,CACjB,CAAC;YAEP,MAAM,CAAC,CACL,wCACO,QAAQ,IACb,SAAS,EAAG,eAAG,CAAC,YAAY,EAAE,MAAM,CAAC,IAAI,EAAE,SAAS,EAAE,4BAAY,CAAC,IAAI,CAAC,EAAE,gCAAgB,CAAC,QAAQ,CAAC,CAAC;gBAEnG,IAAI,KAAK,2BAAW,CAAC,IAAI,IAAI,CAC7B,6BAAK,SAAS,EAAG,eAAG,CAAC,sBAAsB,EAAE,MAAM,CAAC,SAAS,CAAC;oBAE1D,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa;wBACzB,CACE,6BACE,SAAS,EAAG,eAAG,CACb,qBAAqB,EACrB,MAAM,CAAC,QAAQ,EACf,sCAAsB,CAAC,aAAa,CAAC,CACtC,iBACW,MAAM,IAEhB,gBAAgB,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAClD,CACP;oBAEH,oBAAC,aAAK,IACJ,SAAS,EAAG,eAAG,CAAC,kBAAkB,EAAE,MAAM,CAAC,KAAK,CAAC,EACjD,QAAQ,EAAG,gBAAQ,CAAC,KAAK,EACzB,GAAG,EAAG,QAAQ,EACd,YAAY,EAAG,iBAAiB,EAChC,kBAAkB,EAAG,uBAAuB,EAC5C,oBAAoB,EAAG,IAAI,CAAC,0BAA0B,GAAK,CACzD,CACP;gBACC,eAAe;gBACf,CAAC,CAAC,kBAAkB,IAAI,CAAC,IAAI,KAAK,2BAAW,CAAC,IAAI,CAAC,CAAC,IAAI,cAAc,CACpE,CACP,CAAC;QACJ,CAAC;QAGO,gCAAc,GAAtB,UAAuB,IAAY,EAAE,SAAiB,EAAE,MAAuC;YAC7F,MAAM,CAAC,CACL,6BAAK,SAAS,EAAG,SAAS,IACtB,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,IAAI,CAChC,CACP,CAAC;QACJ,CAAC;QAGO,mCAAiB,GAAzB,UAA0B,KAAoB;YAE1C,IAAA,mCAAa,EACb,+BAAW,CACH;YAEV,IAAI,KAAK,GAAG,kBAAM,EAAE,CAAC;YAErB,aAAa,GAAG,aAAa,IAAI,uBAAW,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;YAEjE,MAAM,CAAC,CACL,kCAAQ,aAAa,CAAS,CAC/B,CAAC;QACJ,CAAC;QAEO,mCAAiB,GAAzB,UAA0B,WAAmB;YAC3C,IAAI,KAAK,GAAG,oCAAoB,CAAC,IAAI,CAAC;YACtC,EAAE,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;gBACjB,MAAM,CAAC,KAAK,CAAC;YACf,CAAC;YAED,IAAI,QAAQ,GAAG,CAAC,CAAC;YACjB,GAAG,CAAC,CAAC,IAAI,IAAI,GAAW,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,IAAI,EAAE,EAAE,CAAC;gBAClE,IAAM,EAAE,GAAW,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;gBAChD,IAAM,KAAK,GAAW,IAAI,GAAG,CAAC,CAAC;gBAC/B,sCAAsC;gBACtC,QAAQ,IAAI,CAAC,EAAE,IAAI,KAAK,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;YAClD,CAAC;YAED,KAAK,GAAG,qBAAqB,CAAC,QAAQ,GAAG,0BAA0B,CAAC,CAAC;YAErE,MAAM,CAAC,KAAK,CAAC;QACf,CAAC;QAGO,4CAA0B,GAAlC,UAAmC,SAAyB;YAC1D,IAAI,CAAC,QAAQ,CAAC;gBACZ,aAAa,EAAE,SAAS,KAAK,sBAAc,CAAC,MAAM;aACnD,CAAC,CAAC;QACL,CAAC;QACH,cAAC;IAAD,CA1KA,AA0KC,CA1K4B,yBAAa;IAC1B,oBAAY,GAAkB;QAC1C,WAAW,EAAE,EAAE;QACf,IAAI,EAAE,2BAAW,CAAC,OAAO;QACzB,QAAQ,EAAE,+BAAe,CAAC,IAAI;KAC/B,CAAC;IAoHF;QADC,oBAAQ;iDAOR;IAGD;QADC,oBAAQ;oDAcR;IAsBD;QADC,oBAAQ;6DAKR;IAzKU,0BAAO","file":"components/Persona/Persona.js","sourcesContent":["import * as React from 'react';\r\nimport {\r\n  BaseComponent,\r\n  autobind,\r\n  css,\r\n  divProperties,\r\n  getInitials,\r\n  getNativeProps,\r\n  getRTL,\r\n  IRenderFunction\r\n} from '../../Utilities';\r\nimport { Image, ImageFit, ImageLoadState } from '../../Image';\r\nimport {\r\n  IPersonaProps,\r\n  PersonaInitialsColor,\r\n  PersonaPresence,\r\n  PersonaSize\r\n} from './Persona.Props';\r\nimport {\r\n  PERSONA_INITIALS_COLOR,\r\n  PERSONA_PRESENCE,\r\n  PERSONA_SIZE\r\n} from './PersonaConsts';\r\nimport * as stylesImport from './Persona.scss';\r\nconst styles: any = stylesImport;\r\n\r\n// The RGB color swatches\r\nconst COLOR_SWATCHES_LOOKUP: PersonaInitialsColor[] = [\r\n  PersonaInitialsColor.lightGreen,\r\n  PersonaInitialsColor.lightBlue,\r\n  PersonaInitialsColor.lightPink,\r\n  PersonaInitialsColor.green,\r\n  PersonaInitialsColor.darkGreen,\r\n  PersonaInitialsColor.pink,\r\n  PersonaInitialsColor.magenta,\r\n  PersonaInitialsColor.purple,\r\n  PersonaInitialsColor.black,\r\n  PersonaInitialsColor.teal,\r\n  PersonaInitialsColor.blue,\r\n  PersonaInitialsColor.darkBlue,\r\n  PersonaInitialsColor.orange,\r\n  PersonaInitialsColor.darkRed,\r\n  PersonaInitialsColor.red\r\n];\r\n\r\nconst COLOR_SWATCHES_NUM_ENTRIES = COLOR_SWATCHES_LOOKUP.length;\r\n\r\nexport interface IPersonaState {\r\n  isImageLoaded?: boolean;\r\n}\r\n\r\nexport class Persona extends BaseComponent<IPersonaProps, IPersonaState> {\r\n  public static defaultProps: IPersonaProps = {\r\n    primaryText: '',\r\n    size: PersonaSize.regular,\r\n    presence: PersonaPresence.none\r\n  };\r\n\r\n  constructor(props: IPersonaProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      isImageLoaded: false,\r\n    };\r\n  }\r\n\r\n  public render() {\r\n    let {\r\n      className,\r\n      size,\r\n      imageUrl,\r\n      initialsColor,\r\n      presence,\r\n      primaryText,\r\n      secondaryText,\r\n      tertiaryText,\r\n      optionalText,\r\n      hidePersonaDetails,\r\n      imageShouldFadeIn,\r\n      onRenderInitials = this._onRenderInitials,\r\n      onRenderPrimaryText,\r\n      onRenderSecondaryText,\r\n      onRenderTertiaryText,\r\n      onRenderOptionalText,\r\n      imageShouldStartVisible\r\n    } = this.props;\r\n\r\n    initialsColor = initialsColor !== undefined && initialsColor !== null ? initialsColor : this._getColorFromName(primaryText);\r\n\r\n    let presenceElement = null;\r\n    if (presence !== PersonaPresence.none) {\r\n      let userPresence = PersonaPresence[presence],\r\n        statusIcon = null;\r\n      switch (userPresence) {\r\n        case 'online':\r\n          userPresence = 'SkypeCheck';\r\n          break;\r\n        case 'away':\r\n          userPresence = 'SkypeClock';\r\n          break;\r\n        case 'dnd':\r\n          userPresence = 'SkypeMinus';\r\n          break;\r\n        default:\r\n          userPresence = '';\r\n      }\r\n      if (userPresence) {\r\n        let iconClass = css(`ms-Persona-presenceIcon ms-Icon ms-Icon--${userPresence}`, styles.presenceIcon);\r\n        statusIcon = <i className={ iconClass }></i>;\r\n      }\r\n      presenceElement = <div className={ css('ms-Persona-presence', styles.presence) }>{ statusIcon }</div>;\r\n    }\r\n\r\n    let divProps = getNativeProps(this.props, divProperties);\r\n    let personaDetails = <div className={ css('ms-Persona-details', styles.details) }>\r\n      { this._renderElement(\r\n        this.props.primaryText,\r\n        css('ms-Persona-primaryText', styles.primaryText),\r\n        onRenderPrimaryText) }\r\n      { this._renderElement(\r\n        this.props.secondaryText,\r\n        css('ms-Persona-secondaryText', styles.secondaryText),\r\n        onRenderSecondaryText) }\r\n      { this._renderElement(\r\n        this.props.tertiaryText,\r\n        css('ms-Persona-tertiaryText', styles.tertiaryText),\r\n        onRenderTertiaryText) }\r\n      { this._renderElement(\r\n        this.props.optionalText,\r\n        css('ms-Persona-optionalText', styles.optionalText),\r\n        onRenderOptionalText) }\r\n      { this.props.children }\r\n    </div>;\r\n\r\n    return (\r\n      <div\r\n        { ...divProps }\r\n        className={ css('ms-Persona', styles.root, className, PERSONA_SIZE[size], PERSONA_PRESENCE[presence]) }\r\n      >\r\n        { size !== PersonaSize.tiny && (\r\n          <div className={ css('ms-Persona-imageArea', styles.imageArea) }>\r\n            {\r\n              !this.state.isImageLoaded &&\r\n              (\r\n                <div\r\n                  className={ css(\r\n                    'ms-Persona-initials',\r\n                    styles.initials,\r\n                    PERSONA_INITIALS_COLOR[initialsColor]\r\n                  ) }\r\n                  aria-hidden='true'\r\n                >\r\n                  { onRenderInitials(this.props, this._onRenderInitials) }\r\n                </div>\r\n              )\r\n            }\r\n            <Image\r\n              className={ css('ms-Persona-image', styles.image) }\r\n              imageFit={ ImageFit.cover }\r\n              src={ imageUrl }\r\n              shouldFadeIn={ imageShouldFadeIn }\r\n              shouldStartVisible={ imageShouldStartVisible }\r\n              onLoadingStateChange={ this._onPhotoLoadingStateChange } />\r\n          </div>\r\n        ) }\r\n        { presenceElement }\r\n        { (!hidePersonaDetails || (size === PersonaSize.tiny)) && personaDetails }\r\n      </div>\r\n    );\r\n  }\r\n\r\n  @autobind\r\n  private _renderElement(text: string, className: string, render?: IRenderFunction<IPersonaProps>): JSX.Element {\r\n    return (\r\n      <div className={ className }>\r\n        { render ? render(this.props) : text }\r\n      </div>\r\n    );\r\n  }\r\n\r\n  @autobind\r\n  private _onRenderInitials(props: IPersonaProps): JSX.Element {\r\n    let {\r\n      imageInitials,\r\n      primaryText\r\n    } = props;\r\n\r\n    let isRTL = getRTL();\r\n\r\n    imageInitials = imageInitials || getInitials(primaryText, isRTL);\r\n\r\n    return (\r\n      <span>{ imageInitials }</span>\r\n    );\r\n  }\r\n\r\n  private _getColorFromName(displayName: string): PersonaInitialsColor {\r\n    let color = PersonaInitialsColor.blue;\r\n    if (!displayName) {\r\n      return color;\r\n    }\r\n\r\n    let hashCode = 0;\r\n    for (let iLen: number = displayName.length - 1; iLen >= 0; iLen--) {\r\n      const ch: number = displayName.charCodeAt(iLen);\r\n      const shift: number = iLen % 8;\r\n      // tslint:disable-next-line:no-bitwise\r\n      hashCode ^= (ch << shift) + (ch >> (8 - shift));\r\n    }\r\n\r\n    color = COLOR_SWATCHES_LOOKUP[hashCode % COLOR_SWATCHES_NUM_ENTRIES];\r\n\r\n    return color;\r\n  }\r\n\r\n  @autobind\r\n  private _onPhotoLoadingStateChange(loadState: ImageLoadState) {\r\n    this.setState({\r\n      isImageLoaded: loadState === ImageLoadState.loaded\r\n    });\r\n  }\r\n}\r\n"],"sourceRoot":"..\\..\\..\\src"}